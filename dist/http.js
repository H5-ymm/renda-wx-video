"use strict";var _util=require("./util.js"),baseUrl="https://a.rsd123.com/",apiUrl=baseUrl+"wx.php",http=function(t,a,e){return console.log(a),new Promise(function(s,o){wx.request({url:""+apiUrl+t,data:a,header:{"Content-Type":"application/x-www-form-urlencoded"},method:e||"POST",success:function(a){if(200===a.statusCode)if(200===a.data.status.code)s(a.data);else if(1009===a.data.status.code||6001===a.data.status.code||6002===a.data.status.code||6006===a.data.status.code||6007===a.data.status.code||6010===a.data.status.code||6100===a.data.status.code||3058===a.data.status.code)o(a.data);else if("/Wxresume/addResume"===t)o(a.data);else if("/Login/is_autologin"===t&&6003===a.data.status.code)setTimeout(function(){wx.redirectTo({url:"/pages/login/login"})},300);else{var e=a.data.status.remind?a.data.status.remind:"没有信息";(0,_util.wxToast)(e)}else(0,_util.wxToast)("请求失败")},fail:function(t){(0,_util.wxToast)("网络失败"),o(t)}}).onHeadersReceived(function(t){})})},uploadFile=function(t){return new Promise(function(a,e){wx.uploadFile({url:apiUrl+"/uploadimg/moreupload",filePath:t[0],name:"image",success:function(t){t.data&&a(JSON.parse(t.data))},fail:function(t){e(t)}})})};module.exports={$http:http,uploadFile:uploadFile};