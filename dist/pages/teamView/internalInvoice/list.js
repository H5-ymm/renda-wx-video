"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_wepy=require("./../../../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_http=require("./../../../http.js"),_search=require("./../../../components/search.js"),_search2=_interopRequireDefault(_search),_invoiceList=require("./../../../components/invoiceList.js"),_invoiceList2=_interopRequireDefault(_invoiceList),_viewNoticeModal=require("./../../../components/viewNoticeModal.js"),_viewNoticeModal2=_interopRequireDefault(_viewNoticeModal),_util=require("./../../../util.js"),checkResumeList=function(e){function t(){var e,i,n,o;_classCallCheck(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return i=n=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n.$repeat={},n.$props={search:{bindsearchValue:"searchValue",class:"weui-cell weui-flex start page_card"},invoiceList:{"xmlns:v-bind":"","v-bind:list.sync":"newList","v-bind:recommendType.sync":"recommendType",bindhandleJob:"handleJob",bindselectJob:"selectJob"},viewNoticeModal:{"v-bind:isScaleModal.sync":"isModal","v-bind:height.sync":"modalHeight","v-bind:timeInfo.sync":"timeInfo","v-bind:title.sync":"title"}},n.$events={},n.components={search:_search2.default,invoiceList:_invoiceList2.default,viewNoticeModal:_viewNoticeModal2.default},n.data={list:[],params:{uid:"",page:1,limit:10},count:0,isSeachWidth:!1,isModal:!0,modalHeight:860,title:"查看面试时间",recommendType:0,job_id:"",timeInfo:{},id:"",recommendId:""},n.computed={newList:function(){return(0,_util.getList)(this.list,"addtime")},urlApi:function(){return this.recommendType?"/apply/add_put":"/teamjob/add_put"}},n.config={navigationBarTitleText:"内部发单"},n.events={searchValue:function(e){n.params=Object.assign(n.params,{where:e}),n.getList()},inputFocus:function(){n.isSeachWidth=!0,n.$apply()},handleJob:function(e){var t={};t=n.recommendType?{uid:n.params.uid,resume_id:n.id,apply_id:e.id}:{uid:n.params.uid,resume_id:n.id,job_id:e.id},(0,_util.wxShowModal)("","确定推荐岗位吗?","确定").then(function(e){n.recommend(t)}).catch(function(){console.log("取消")})},selectJob:function(e){var t="";n.recommendType?(wx.setStorageSync("receiptType",-1),t="teamJobDetail"):t="insiderJobDetail",wx.redirectTo({url:"/pages/teamView/internalInvoice/"+t+"?query="+e.id+"&resume_id="+n.id})}},n.methods={},o=i,_possibleConstructorReturn(n,o)}return _inherits(t,e),_createClass(t,[{key:"onLoad",value:function(e){this.params.uid=wx.getStorageSync("rendaUid")||this.$parent.globalData.uid,this.recommendType=Number(e.query),this.recommendId=e.recommendId,this.id=e.resumeId,this.$apply(),wx.setNavigationBarTitle({title:this.getTitle(this.recommendType)})}},{key:"onShow",value:function(){this.getList(),this.$apply()}},{key:"recommend",value:function(e){(0,_http.$http)(this.urlApi,e).then(function(e){e.data?((0,_util.wxToast)(e.data||"推荐成功"),(0,_util.wxNavigateTo)("/pages/home/index")):(0,_util.wxToast)("推荐失败")})}},{key:"getGeportOrderList",value:function(){var e=this;(0,_http.$http)("/Wxresume/reportOrderList",this.params).then(function(t){e.list=t.data.data||[],e.count=t.data.count,e.$apply()})}},{key:"getInternalInvoiceList",value:function(){var e=this;(0,_http.$http)("/Wxresume/internalInvoiceList",this.params).then(function(t){e.list=t.data.data||[],e.count=t.data.count,e.$apply()})}},{key:"getList",value:function(){1==this.recommendType?this.getGeportOrderList():this.getInternalInvoiceList()}},{key:"getTitle",value:function(e){return 1==e?"团队接单":"内部发单"}}]),t}(_wepy2.default.page);Page(require("./../../../npm/wepy/lib/wepy.js").default.$createPage(checkResumeList,"pages/teamView/internalInvoice/list"));