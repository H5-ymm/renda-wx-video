"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_http=require("./../http.js"),lock=!1,districtSelet=function(t){function e(){var t,i,s,n;_classCallCheck(this,e);for(var o=arguments.length,a=Array(o),r=0;r<o;r++)a[r]=arguments[r];return i=s=_possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),s.props={address:Array,disabled:Boolean},s.data={options:[],multiArray:[],multiIndex:[0,0,0],codeList:[],province:[],isScaleModal:!0,isShow:!1,isChange:!1},s.watch={address:function(t){t&&0!=t[0]&&(this.options=t,lock=!0,this.$apply(),this.getRegion(t))}},s.methods={changeCity:function(){this.isScaleModal=!this.isScaleModal,this.isShow=!0,this.$apply()},selectOk:function(){var t=this;this.isChange?this.codeList.forEach(function(e,i){t.options[i]=e[t.multiIndex[i]]?e[t.multiIndex[i]]:0}):this.options=[11e4,110100,110101],this.options.length&&(this.isScaleModal=!this.isScaleModal,this.$apply(),console.log(this.options),this.$emit("selectCity",this.options))},bindChange:function(t){this.isChange=!0,this.multiIndex=t.detail.value,this.$apply(),this.getCityList([this.codeList[0][this.multiIndex[0]],0])},selectClose:function(){this.isScaleModal=!this.isScaleModal,this.$apply()},cancelPickerChange:function(t){this.isChange=!1,!this.address||this.address&&0===this.address.length?(this.multiIndex=[0,0,0],this.options=[],this.getRegion([])):(lock=!0,this.getRegion(this.address)),this.$apply()}},n=i,_possibleConstructorReturn(s,n)}return _inherits(e,t),_createClass(e,[{key:"getCode",value:function(t){return t.map(function(t){return t.id})}},{key:"getList",value:function(t){return t.map(function(t){return t.area_name})}},{key:"getRegion",value:function(t){var e=this;(0,_http.$http)("/Constant/selectAddress",{}).then(function(i){var s=e.getList(i.data);e.codeList[0]=e.getCode(i.data),e.multiArray[0]=s,e.getCityList(t)}).catch(function(t){t&&e.$message.warning(t.status.remind)})}},{key:"getCityList",value:function(t){var e=this,i="";i=t.length?t[0]:"110000",(0,_http.$http)("/Constant/selectAddress",{parentId:i}).then(function(i){var s=e.getList(i.data);e.codeList[1]=e.getCode(i.data),e.multiArray[1]=s,e.disabled&&e.getAreaList(t),lock&&e.address&&e.address.length&&(lock=!1,e.multiIndex=e.codeList.map(function(t,i){return-1===t.indexOf(e.address[i])?0:t.indexOf(e.address[i])})),e.$apply()})}},{key:"getAreaList",value:function(t){var e=this,i="";i=t[1]?t[1]:this.codeList[1][0],(0,_http.$http)("/Constant/selectAddress",{parentId:i}).then(function(t){var i=e.getList(t.data);if(e.codeList[2]=e.getCode(t.data),e.multiArray[2]=i,e.address&&e.address.length){var s=e.codeList[2].indexOf(e.address[2]);e.multiIndex[2]=s}e.$apply()})}},{key:"onLoad",value:function(){(!this.address||this.address&&0==this.address.length)&&this.getRegion([])}}]),e}(_wepy2.default.component);exports.default=districtSelet;