"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_http=require("./../http.js"),lock=!1,districtSelet=function(t){function e(){var t,i,n,s;_classCallCheck(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return i=n=_possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o))),n.props={address:Array,disabled:Boolean},n.data={options:[],multiArray:[],multiIndex:[0,0,0],codeList:[],province:[]},n.watch={address:function(t){t&&0!=t[0]&&(this.options=t,lock=!0,this.$apply(),this.getRegion(t))}},n.methods={bindMultiPickerChange:function(t){var e=this;if(this.multiIndex=t.detail.value,this.codeList.forEach(function(t,i){e.options[i]=t[e.multiIndex[i]]?t[e.multiIndex[i]]:0}),this.options.length&&(this.$emit("selectCity",this.options),this.multiArray[2])){var i=this.multiArray[0][this.multiIndex[0]]+"/"+this.multiArray[1][this.multiIndex[1]]+"/"+this.multiArray[2][this.multiIndex[2]];console.log(i),this.$emit("selectCityText",i)}},bindMultiPickerColumnChange:function(t){this.multiIndex[t.detail.column]=t.detail.value;var e=this.codeList[0][this.multiIndex[0]];if(0==t.detail.column)this.getCityList([e,0]),this.multiIndex=[t.detail.value,0,0];else if(1==t.detail.column){if(this.multiIndex[1]=t.detail.value,this.disabled){var i=this.codeList[1][this.multiIndex[1]];this.getAreaList([e,i])}}else this.multiIndex[2]=t.detail.value;this.$apply()},cancelPickerChange:function(t){!this.address||this.address&&0===this.address.length?(this.multiIndex=[0,0,0],this.options=[],this.$apply(),this.getRegion([])):(lock=!0,this.getRegion(this.address))}},s=i,_possibleConstructorReturn(n,s)}return _inherits(e,t),_createClass(e,[{key:"getCode",value:function(t){return t.map(function(t){return t.code||t.provinceid})}},{key:"getList",value:function(t){return t.map(function(t){return t.name||t.province})}},{key:"getRegion",value:function(t){var e=this;(0,_http.$http)("/Wxresume/getProvincesList").then(function(i){var n=e.getList(i.data);e.codeList[0]=e.getCode(i.data),e.multiArray[0]=n,e.getCityList(t)}).catch(function(t){t&&e.$message.warning(t.status.remind)})}},{key:"getCityList",value:function(t){var e=this,i="";i=t.length?t[0]:"110000",(0,_http.$http)("/Wxresume/getCitysList",{code:i}).then(function(i){var n=e.getList(i.data);e.codeList[1]=e.getCode(i.data),e.multiArray[1]=n,e.disabled&&e.getAreaList(t),lock&&e.address&&e.address.length&&!e.address[2]&&(lock=!1,e.multiIndex=e.codeList.map(function(t,i){return-1===t.indexOf(e.address[i])?0:t.indexOf(e.address[i])})),e.$apply()})}},{key:"getAreaList",value:function(t){var e=this,i="";i=t[1]?t[1]:this.codeList[1][0],(0,_http.$http)("/Wxresume/getAreasList",{code:i}).then(function(t){var i=e.getList(t.data);e.codeList[2]=e.getCode(t.data),e.multiArray[2]=i,lock&&e.address&&e.address.length&&(lock=!1,e.multiIndex=e.codeList.map(function(t,i){return-1===t.indexOf(e.address[i])?0:t.indexOf(e.address[i])})),e.$apply()})}},{key:"onLoad",value:function(){(!this.address||this.address&&0==this.address.length)&&this.getRegion([])}}]),e}(_wepy2.default.component);exports.default=districtSelet;