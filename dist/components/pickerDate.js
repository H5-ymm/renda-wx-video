"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;for(var _createClass=(function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}()),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_http=require("./../http.js"),_moment=require("./../npm/moment/moment.js"),_moment2=_interopRequireDefault(_moment),leftPad0=function(e,t){e||(e="");for(var r="",a=0;a<t;a++)r+="0";return(r+e).substr(-t)},stringToDate=function(e){return e=e.replace(/-/g,"/"),new Date(e)},isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},now=new Date,years=[],beginYear=(0,_moment2.default)().year(),i=beginYear;i<=now.getFullYear();i++)years.push(i+"年");for(var months=[],i=0;i<12;i++)months.push(leftPad0(i+1,2)+"月");for(var days=[],i=0;i<31;i++)days.push(leftPad0(i+1,2)+"日");for(var hours=[],i=0;i<24;i++)hours.push(leftPad0(i,2)+"时");for(var minutes=[],i=0;i<60;i++)minutes.push(leftPad0(i,2)+"分");var pickerModal=function(e){function t(){var e,r,a,n;_classCallCheck(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=a=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.props={value:String,dateValue:{type:Date}},a.data={valueArray:[0,0,0,0,0],rangeValues:[years,months,days,hours,minutes],pickerYear:beginYear,pickerMonth:1},a.methods={bindChange:function(e){this.value=e.detail.value},handleClose:function(){this.isShow=!1,this.$apply(),this.$emit("handleClose")},handleColumnChange:function(e){if(e.detail.column>1)return!1;var t=this.pickerYear,r=this.pickerMonth;0==e.detail.column?t=e.detail.value+beginYear:1==e.detail.column&&(r=e.detail.value+1),this._settMonthDays(t,r)},handleValueChange:function(e){var t=[];for(var r in e.detail.value){var a=this.rangeValues[r][e.detail.value[r]];t.push(a.toString().substr(0,a.length-1))}var n=t[0]+"-"+t[1]+"-"+t[2]+" "+t[3]+":"+t[4]+":00",i={date:stringToDate(n),dateString:n};this.$emit("change",i)}},a.watch={value:function(e){console.log(e),this.valueArray=this._dateToValueArray(stringToDate(e)),console.log(this.valueArray),this.$apply()},dateValue:function(e){this.valueArray=this._dateToValueArray(e),this.$apply()},valueArray:function(e){this._settMonthDays(e[0]+beginYear,e[1]+1)}},n=r,_possibleConstructorReturn(a,n)}return _inherits(t,e),_createClass(t,[{key:"_dateToValueArray",value:function(e){return[e.getFullYear()-beginYear,e.getMonth(),e.getDate()-1,e.getHours(),e.getMinutes()]}},{key:"_settMonthDays",value:function(e,t){var r=31;switch(t){case 2:r=28,isLeapYear(e)&&(r=29);break;case 4:case 6:case 9:case 11:r=30}for(var a=[],n=0;n<r;n++)a.push(leftPad0(n+1,2)+"日");this.pickerYear=e,this.pickerMonth=t,this.rangeValues[2]=a,console.log(this.rangeValues)}},{key:"getNum",value:function(e){return e<10?"0"+e:e}}]),t}(_wepy2.default.component);exports.default=pickerModal;