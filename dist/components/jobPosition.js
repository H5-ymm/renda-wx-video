"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_http=require("./../http.js"),lock=!1,jobPosition=function(t){function e(){var t,i,o,n;_classCallCheck(this,e);for(var s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];return i=o=_possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),o.props={jobList:Array,placeholder:{type:String,default:"请选择岗位类别"}},o.data={options:[],multiArray:[],multiIndex:[0,0,0],idList:[],isScaleModal:!0,isShow:!1},o.watch={jobList:function(t){t&&0!=t[0]&&(this.options=t,lock=!0,this.$apply(),this.getJobList(t))},isScaleModal:function(t){t?this.isShow=!1:(this.isShow=!0,this.getJobList([])),this.$apply()}},o.methods={changeCity:function(){this.isScaleModal=!this.isScaleModal,this.isShow=!0,this.$apply()},selectOk:function(){var t=this;this.idList.forEach(function(e,i){t.options[i]=e[t.multiIndex[i]]?e[t.multiIndex[i]]:0}),this.options.length&&(this.isScaleModal=!this.isScaleModal,this.$apply(),this.options[2]?this.$emit("selectJobType",this.options[2]):this.$emit("selectJobType",this.options[1]))},bindChange:function(t){this.multiIndex=t.detail.value,this.getJobList1([this.idList[0][this.multiIndex[0]],this.idList[1][this.multiIndex[1]]])},selectClose:function(){this.isScaleModal=!this.isScaleModal,this.$apply()},cancelPickerChange:function(t){!this.jobList||this.jobList&&0===this.jobList.length?(this.multiIndex=[0,0,0],this.options=[],this.$apply(),this.getJobList([])):(lock=!0,this.getJobList(this.jobList))}},n=i,_possibleConstructorReturn(o,n)}return _inherits(e,t),_createClass(e,[{key:"getIdList",value:function(t){return t.map(function(t){return t.id})}},{key:"getList",value:function(t){return t.map(function(t){return t.type_name})}},{key:"getJobList",value:function(t){var e=this;(0,_http.$http)("/Constant/getJobType",{parentId:""}).then(function(i){var o=e.getList(i.data);e.idList[0]=e.getIdList(i.data),e.multiArray[0]=o,e.getJobList1(t)}).catch(function(t){})}},{key:"getJobList1",value:function(t){var e=this,i="";i=t.length?t[0]:1,(0,_http.$http)("/Constant/getJobType",{parentId:i}).then(function(i){var o=e.getList(i.data);e.idList[1]=e.getIdList(i.data),e.multiArray[1]=o,e.$apply(),e.getJobList3(t)})}},{key:"getJobList3",value:function(t){var e=this;console.log(t);var i="";i=t[1]?t[1]:this.idList[1][0],(0,_http.$http)("/Constant/getJobType",{parentId:i}).then(function(t){var i=e.getList(t.data);e.idList[2]=e.getIdList(t.data),e.multiArray[2]=i,lock&&e.jobList&&e.jobList.length&&(lock=!1,e.multiIndex=e.idList.map(function(t,i){return-1===t.indexOf(e.jobList[i])?0:t.indexOf(e.jobList[i])})),e.$apply()})}}]),e}(_wepy2.default.component);exports.default=jobPosition;