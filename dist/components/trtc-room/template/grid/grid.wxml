<!-- template grid -->
<template name='grid'>
  <view class="template-grid {{visibleStreamList.length < 9 ? 'stream-' + visibleStreamList.length : 'stream-8'}}">
    <view wx:for="{{visibleStreamList}}" wx:key="streamID"
      class="view-container player-container {{item.isVisible?'':'none'}}" data-userid="{{item.userID}}"
      data-streamtype="{{item.streamType}}" bindtap="_doubleTabToggleFullscreen">
      <live-player class="player" id="{{item.streamID}}" data-userid="{{item.userID}}" data-streamid="{{item.streamID}}"
        data-streamtype="{{item.streamType}}" src="{{item.src}}" mode="RTC" autoplay="{{item.autoplay}}"
        mute-audio="{{item.muteAudio}}" mute-video="{{item.muteVideo}}" orientation="{{item.orientation}}"
        object-fit="{{item.objectFit}}" background-mute="{{item.enableBackgroundMute}}" min-cache="{{item.minCache}}"
        max-cache="{{item.maxCache}}" sound-mode="{{item.soundMode}}" enable-recv-message="{{item.enableRecvMessage}}"
        auto-pause-if-navigate="{{item.autoPauseIfNavigate}}" auto-pause-if-open-native="{{item.autoPauseIfOpenNative}}"
        debug="{{debug}}" bindstatechange="_playerStateChange" bindfullscreenchange="_playerFullscreenChange"
        bindnetstatus="_playerNetStatus" bindaudiovolumenotify="_playerAudioVolumeNotify" />
      <view class="operation-bar">
        <view class="btn-normal" bindtap="_handleSubscribeRemoteAudio" data-user-i-d="{{item.userID}}"
          data-stream-type="{{item.streamType}}">
          <image class="btn-image" src="{{item.muteAudio? './static/speaker-false.png': './static/speaker-true.png'}}">
          </image>
        </view>
        <view class="btn-normal" bindtap="_handleSubscribeRemoteVideo" data-user-i-d="{{item.userID}}"
          data-stream-type="{{item.streamType}}">
          <image class="btn-image" src="{{item.muteVideo? './static/camera-false.png': './static/camera-true.png'}}">
          </image>
        </view>
        <view class="btn-normal" bindtap="_toggleFullscreen" data-user-i-d="{{item.userID}}"
          data-stream-type="{{item.streamType}}">
          <image class="btn-image" src="./static/fullscreen.png"></image>
        </view>
      </view>
      <progress class="volume-progress" percent="{{item.volume}}" stroke-width="4" />
    </view>
    <view class="view-container pusher-container {{pusher.isVisible?'':'none'}}">
      <live-pusher class="pusher" url="{{pusher.url}}" mode="{{pusher.mode}}" autopush="{{pusher.autopush}}"
        enable-mic="{{pusher.enableMic}}" enable-agc="{{pusher.enableAgc}}"
        enable-ans="{{pusher.enableAns}}" enable-ear-monitor="{{pusher.enableEarMonitor}}"
        auto-focus="{{pusher.enableAutoFocus}}" zoom="{{pusher.enableZoom}}" min-bitrate="{{pusher.minBitrate}}"
        max-bitrate="{{pusher.maxBitrate}}" video-width="{{pusher.videoWidth}}" video-height="{{pusher.videoHeight}}"
        beauty="{{pusher.beautyLevel}}" whiteness="{{pusher.whitenessLevel}}" orientation="{{pusher.videoOrientation}}"
        aspect="{{pusher.videoAspect}}" device-position="{{pusher.frontCamera}}"
        remote-mirror="{{pusher.enableRemoteMirror}}" local-mirror="{{pusher.localMirror}}"
        background-mute="{{pusher.enableBackgroundMute}}" audio-quality="{{pusher.audioQuality}}"
        audio-volume-type="{{pusher.audioVolumeType}}" audio-reverb-type="{{pusher.audioReverbType}}"
        waiting-image="{{pusher.waitingImage}}" debug="{{debug}}" bindstatechange="_pusherStateChangeHandler"
        bindnetstatus="_pusherNetStatusHandler" binderror="_pusherErrorHandler" bindbgmstart="_pusherBGMStartHandler"
        bindbgmprogress="_pusherBGMProgressHandler" bindbgmcomplete="_pusherBGMCompleteHandler" />
      <view class="operation-bar">
        <view class="btn-normal" bindtap="switchCamera">
          <image class="btn-image" src="./static/switch.png"></image>
        </view>
        <!-- <view class="btn-normal" bindtap="_switchSettingPanel">
          <image class="btn-image" src="./static/setting.png"></image>
        </view> -->
        <view class="btn-normal btn-hangup" bindtap="_hangUp">
          <image class="btn-image" src="./static/hangup.png"></image>
        </view>
      </view>
    </view>
    <view class="masker {{panelName =='' ? 'none' : ''}}" bindtap="_handleMaskerClick"></view>
  </view>
</template>